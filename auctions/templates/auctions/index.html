{% extends "auctions/layout.html" %}

{% block body %}

    <div class="text-center col-lg-8 m-auto">
        <h2>Active Listings</h2>
        <form action="{% url 'index' %}" method="POST">
            {% csrf_token %}
            <div class="input-group m-auto">
                <input name="search" class="form-control w-50" type="search" placeholder="Search for anything" value="{{ search }}" autocomplete="off">
                <select name="category" class="form-select w-25" id="search_categories">
                    <option value="all" selected>All Categories</option>

                    {% for category_value, category_text in categories %}
                        {% if category_value == selected_category and selected_category %} <!-- Set the option to be selected if it is searched category -->
                            <option value="{{ category_value }}" selected>{{ category_text }}</option>
                        {% else %}
                            <option value="{{ category_value }}">{{ category_text }}</option>
                        {% endif %}
                    {% endfor %}

                </select>
                <input class="btn btn-bodyButton" type="submit" value="Search">
            </div>
        </form>
    </div>
    {% if listings.exists %}
        {% include "auctions/helpers/listing_section.html" %}
    {% else %}
        <h4>There are no listings</h4>
    {% endif %}

{% endblock %}
